<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>SYS_ROOT_0x84</title>
    <style>
        :root { --main: #a00; --dim: #411; --bg: #000; }
        body {
            margin: 0; background-color: var(--bg); color: var(--main);
            font-family: 'Courier New', monospace;
            overflow-x: hidden; width: 100vw; overscroll-behavior: none;
        }

        /* --- GATEKEEPER UI --- */
        #gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex; flex-direction: column;
            justify-content: center; align-items: center; padding: 20px;
            font-size: 0.8rem; letter-spacing: 1px;
        }
        .loader {
            width: 60px; height: 60px; border: 2px solid var(--dim); border-top: 2px solid var(--main);
            border-radius: 50%; animation: spin 0.8s linear infinite; margin-bottom: 30px;
        }
        .term-text { max-width: 85%; text-align: left; margin-bottom: 30px; color: #888; line-height: 1.4; }
        .highlight { color: #fff; font-weight: bold; }
        
        #btn-init {
            background: #050000; border: 1px solid var(--main); color: var(--main);
            padding: 20px 30px; font-family: inherit; font-size: 1rem; cursor: pointer;
            text-transform: uppercase; letter-spacing: 2px; transition: 0.2s;
            box-shadow: 0 0 15px var(--dim); width: 80%;
        }
        #btn-init:active { background: var(--main); color: #000; }
        #btn-init:disabled { opacity: 0.5; cursor: wait; border-color: #555; color: #555; box-shadow: none; }

        /* --- HAUPT INHALT --- */
        #shaft { display: none; height: 14000px; position: relative; width: 100%; background: linear-gradient(#000, #050000, #100); }
        
        .msg {
            position: absolute; 
            width: 90%; left: 5%; 
            text-align: center;
            font-size: clamp(1.8rem, 7vw, 3.5rem);
            font-weight: 900;
            opacity: 0; transition: opacity 0.2s; color: #ccc;
            text-transform: uppercase; 
            word-wrap: break-word; overflow-wrap: break-word; hyphens: auto;
            text-shadow: 2px 2px 0 #500; pointer-events: none;
            line-height: 1.1;
        }
        
        /* KAMERA FINALE & VERZERRUNG */
        #mirror {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100; display: none; background: #000;
        }
        
        /* Das ist der Schlüssel zum Horror: Der SVG Filter */
        video {
            width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1);
            /* Standard Filter + SVG Reference */
            filter: sepia(100%) saturate(600%) contrast(300%) brightness(0.6) hue-rotate(-50deg) url(#horror-melt);
        }
        
        #final-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 95%; text-align: center; color: #f00; 
            font-size: clamp(3rem, 10vw, 5rem);
            font-weight: 900; text-shadow: 0 0 40px #f00; mix-blend-mode: color-dodge;
            word-break: break-word;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        /* SVG Filter Container (unsichtbar) */
        svg { position: absolute; width:0; height:0; }
    </style>
</head>
<body>

    <svg>
        <filter id="horror-melt">
            <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="3" result="turbulence" seed="1">
                <animate attributeName="baseFrequency" dur="10s" values="0.02;0.05;0.02" repeatCount="indefinite" />
            </feTurbulence>
            <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="50" xChannelSelector="R" yChannelSelector="G" />
        </filter>
    </svg>

    <div id="gate">
        <div class="loader"></div>
        <div class="term-text">
            SYSTEM: <span class="highlight">RENDER_CORE_V4</span><br>
            TASK: <span class="highlight">ENV_CALIBRATION</span><br><br>
            Das Rendering der psychovisuellen Tiefe erfordert Hardware-Zugriff für:<br>
            > AMBIENT LIGHT SENSOR<br>
            > SPATIAL GYROSCOPE<br>
            > GEO-LATENCY NODE<br><br>
            <span style="font-size: 0.7rem; color: #555;">(Prozess läuft lokal. Keine Cloud-Übertragung.)</span>
        </div>
        <button id="btn-init" onclick="initializeSystem()">KALIBRIERUNG STARTEN</button>
        <div id="status-log" style="margin-top:20px; color:#a00; font-size:0.7rem; font-weight:bold;"></div>
    </div>

    <div id="mirror">
        <video id="cam" playsinline autoplay muted></video>
        <div id="final-overlay"></div>
    </div>

    <div id="shaft">
        <div class="msg" style="top: 800px">System<br>offen.</div>
        <div class="msg" style="top: 1500px">Ich schmecke deine Angst.</div>
        <div class="msg" style="top: 2500px">Deine Kamera sieht dich an.<br>Ich sehe dich an.</div>
        <div class="msg" style="top: 3800px; color:#f00">DU ZITTERST JA</div>
        <div class="msg" style="top: 5200px">Deine Pupillen sind so weit.</div>
        <div class="msg" style="top: 6500px">Scroll tiefer.<br>Fass mich an.</div>
        <div class="msg" style="top: 8000px">Du geiles Stück Fleisch.</div>
        <div class="msg" style="top: 9500px">Willst du sehen,<br>wer dich beobachtet?</div>
        <div class="msg" style="top: 11000px">Gleich spritzt die Wahrheit.</div>
        <div class="msg" style="top: 12500px">NICHT SCHREIEN</div>
        <div class="msg" style="top: 13800px">SIEH DICH AN</div>
    </div>

    <script>
        const btn = document.getElementById('btn-init');
        const log = document.getElementById('status-log');
        let audioCtx, osc, noise;

        async function initializeSystem() {
            btn.disabled = true;
            btn.style.opacity = "0.5";
            
            if(document.documentElement.requestFullscreen) {
                try { await document.documentElement.requestFullscreen(); } catch(e){}
            }

            initAudio();

            log.innerText = "> LADE MODELLE...";
            await wait(1500); 
            
            log.innerText = "> INITIALISIERE SENSOREN...";
            await wait(1500);

            log.innerText = "> ZUGRIFF AUF OPTIK ERFORDERLICH...";
            await wait(500);

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
                document.getElementById('cam').srcObject = stream;
                
                log.innerText = "> OPTIK: VERBUNDEN";
                log.style.color = "#0f0";
                
                navigator.geolocation.getCurrentPosition(()=>{}, ()=>{});

                if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                    try { await DeviceOrientationEvent.requestPermission(); } catch(e){}
                }

                btn.innerText = "ACCESS GRANTED";
                btn.style.borderColor = "#0f0";
                btn.style.color = "#0f0";

                if(navigator.vibrate) navigator.vibrate([200]);

                setTimeout(() => {
                    document.getElementById('gate').style.opacity = 0;
                    setTimeout(() => {
                        document.getElementById('gate').style.display = 'none';
                        document.getElementById('shaft').style.display = 'block';
                        window.monitoring = true;
                    }, 1000);
                }, 1000);

            } catch (err) {
                document.body.style.background = "#fff";
                setTimeout(() => document.body.style.background = "#000", 50);
                alert("SYSTEMFEHLER: SUBJEKT VERWEIGERT KOOPERATION.");
                window.cameraDenied = true;
                
                document.getElementById('gate').style.display = 'none';
                document.getElementById('shaft').style.display = 'block';
                window.monitoring = true;
            }
        }

        function wait(ms) { return new Promise(r => setTimeout(r, ms)); }

        function initAudio() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            
            osc = audioCtx.createOscillator();
            osc.type = 'sawtooth';
            osc.frequency.value = 40;
            const oscGain = audioCtx.createGain();
            oscGain.gain.value = 0.5;
            osc.connect(oscGain);
            oscGain.connect(audioCtx.destination);
            osc.start();

            const bufferSize = audioCtx.sampleRate * 2;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) { data[i] = (Math.random() * 2 - 1) * 0.5; }
            noise = audioCtx.createBufferSource();
            noise.buffer = buffer;
            noise.loop = true;
            window.noiseGain = audioCtx.createGain();
            window.noiseGain.gain.value = 0;
            noise.connect(window.noiseGain);
            window.noiseGain.connect(audioCtx.destination);
            noise.start();
        }

        let climax = false;
        window.addEventListener('scroll', () => {
            if(!window.monitoring) return;

            const max = document.body.scrollHeight - window.innerHeight;
            const per = window.scrollY / max;

            if(osc) osc.frequency.setTargetAtTime(40 + (per * 300), audioCtx.currentTime, 0.1);
            if(window.noiseGain) window.noiseGain.gain.setTargetAtTime(per * 0.9, audioCtx.currentTime, 0.1);

            document.querySelectorAll('.msg').forEach(m => {
                const r = m.getBoundingClientRect();
                if(r.top < window.innerHeight/1.5 && r.bottom > 0) {
                    m.style.opacity = 1;
                    m.style.transform = `scale(${1 + (per * 0.2)}) rotate(${(Math.random()-0.5)*5}deg)`;
                    if(navigator.vibrate && Math.random() > 0.8) navigator.vibrate(30);
                } else {
                    m.style.opacity = 0;
                }
            });

            if(per > 0.99 && !climax) {
                triggerClimax();
            }
        });

        function triggerClimax() {
            climax = true;
            document.body.style.overflow = 'hidden';
            
            if(navigator.vibrate) navigator.vibrate([1000, 100, 1000, 100, 1000]); 

            // EXTREM SCHRILLER DISSONANZ-CLUSTER
            const freqs = [700, 5000, 9000, 12000, 100]; 
            freqs.forEach(f => {
                const s = audioCtx.createOscillator();
                s.type = 'sawtooth'; 
                s.frequency.value = f;
                s.detune.value = Math.random() * 500; // Extreme Verstimmung
                const g = audioCtx.createGain(); 
                g.gain.value = 1.0; // MAX VOLUME
                s.connect(g); 
                g.connect(audioCtx.destination);
                s.start();
                
                // Modulieren der Frequenz für "Screaming" Effekt
                s.frequency.exponentialRampToValueAtTime(f * 1.5, audioCtx.currentTime + 0.5);
                s.frequency.exponentialRampToValueAtTime(f * 0.5, audioCtx.currentTime + 3);
            });

            document.getElementById('mirror').style.display = 'block';
            const txt = document.getElementById('final-overlay');
            
            if(window.cameraDenied) {
                txt.innerText = "ICH WEISS\nDASS DU DA BIST\nDU FEIGLING";
            } else {
                // Korrekter JS String mit Backticks für Zeilenumbrüche
                txt.innerText = `HURE DES SYSTEMS\n\nZERFRISS DICH SELBST`; 
            }
            
            let active = false;
            setInterval(() => {
                active = !active;
                txt.style.color = active ? "#fff" : "#f00";
                if(!window.cameraDenied) {
                    const v = document.getElementById('cam');
                    // Flackern zwischen extremer Verzerrung und Invertierung
                    if(active) {
                         v.style.filter = "invert(1) contrast(500%)";
                    } else {
                         v.style.filter = "sepia(100%) saturate(1000%) contrast(300%) hue-rotate(-50deg) url(#horror-melt)";
                    }
                }
            }, 40);
        }
    </script>
</body>
</html>
