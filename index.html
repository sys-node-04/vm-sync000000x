<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>‎</title>
    <style>
        body {
            margin: 0; 
            background-color: #050000;
            color: #d00;
            font-family: 'Courier New', monospace; /* Wechsel zu Monospace für "kaputten" Look */
            height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            cursor: none; -webkit-tap-highlight-color: transparent;
            touch-action: none;
        }

        /* DRECK-LAYER: Simuliert beschlagenes Glas / Schimmel */
        .grime-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 50% 50%, transparent 50%, rgba(20, 0, 0, 0.8) 120%),
                url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noise)" opacity="0.08"/%3E%3C/svg%3E');
            pointer-events: none; z-index: 10;
            mix-blend-mode: overlay;
        }

        /* SCANLINES für kaputten Screen-Look */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,0,0,0.03) 50%, rgba(0,0,0,0.1) 50%);
            background-size: 100% 4px;
            pointer-events: none; z-index: 9;
        }

        /* DAS "BESESSENE" DIALOG FENSTER */
        #fake-dialog {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 80%; max-width: 300px;
            /* Dreckiger Hintergrund */
            background: #0f0505; 
            border: 1px solid #400;
            box-shadow: 0 0 60px rgba(100, 0, 0, 0.4), inset 0 0 20px rgba(0,0,0,0.8);
            z-index: 2000; display: none;
            text-align: left;
            padding: 20px;
            /* "Glitch" Rand */
            clip-path: polygon(0 2%, 100% 0, 98% 100%, 2% 98%);
        }

        #dialog-title {
            font-size: 0.8rem; font-weight: bold; margin-bottom: 15px; 
            color: #800; letter-spacing: 2px; 
            border-bottom: 1px dashed #400; padding-bottom: 8px;
            font-family: 'Times New Roman', serif;
        }

        #dialog-text { 
            font-size: 1rem; line-height: 1.3; 
            margin-bottom: 30px; color: #a88; 
            text-shadow: 0 0 2px rgba(255,0,0,0.3);
        }

        /* Der glitchy Button */
        .dialog-btn {
            float: right; color: #000; background: #900;
            font-weight: 700; font-size: 0.8rem;
            text-transform: uppercase; cursor: pointer; 
            padding: 10px 18px; border: none;
            position: relative; transition: transform 0.1s;
        }

        /* NOT OKAY FLASH */
        #not-okay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #a00; color: #000; font-weight: 900;
            display: none; justify-content: center; align-items: center;
            font-size: 3.5rem; z-index: 3000; font-family: sans-serif;
            text-align: center; text-transform: uppercase;
            letter-spacing: -2px;
        }

        /* CONTAINER MIT FLÜSSIGER BEWEGUNG */
        .container {
            position: relative; z-index: 2; text-align: center; width: 90%;
            /* WICHTIG: Keine CSS Transition mehr, das macht jetzt JS flüssiger */
            will-change: transform; 
        }

        h1 { 
            font-family: 'Times New Roman', serif; 
            font-size: 2.8rem; letter-spacing: 0.2em; margin: 0; 
            color: #c00; 
            text-shadow: 2px 2px 0px #200, -1px -1px 4px rgba(0,0,0,0.8);
            opacity: 0.9;
        }
        
        #ghost-flash {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(1.4);
            width: 100%; text-align: center; font-size: 2.5rem;
            color: #fff; background: #800; padding: 60px 0;
            z-index: 1001; display: none; pointer-events: none;
            font-weight: bold; box-shadow: 0 0 80px #f00; mix-blend-mode: hard-light;
        }

        .status-box { 
            font-size: 0.65rem; margin-top: 40px; color: #533; 
            text-align: center; letter-spacing: 1px;
            border-top: 1px solid #311; padding-top: 10px;
            opacity: 0.7;
        }

        @keyframes quake { 0% { transform: translate(1px, 1px) rotate(0deg); } 25% { transform: translate(-1px, -2px) rotate(-1deg); } 50% { transform: translate(-3px, 0px) rotate(1deg); } 75% { transform: translate(3px, 2px) rotate(0deg); } 100% { transform: translate(1px, -1px) rotate(0deg); } }
        .quake-active { animation: quake 0.1s infinite !important; }
        .vignette { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, transparent 30%, #000 160%); z-index: 8; pointer-events: none; }
    </style>
</head>
<body>

    <div class="grime-overlay"></div>
    <div class="scanlines"></div>
    <div class="vignette"></div>
    
    <div id="not-okay">LÜGNER</div>
    
    <div id="fake-dialog">
        <div id="dialog-title">SIGMUM INTERDICTUM</div> 
        <div id="dialog-text">Deine Berührung hinterlässt Narben auf meiner Haut.</div>
        <div class="dialog-btn" id="btn-1" ontouchstart="handleBtnTouch()" onclick="handleBtnClick()">ICH VERSTEHE</div>
    </div>

    <div id="ghost-flash">ICH HABE ANGST</div>

    <div class="container" id="main-container">
        <h1>PROXIMITAS</h1>
        <div style="font-style: italic; font-size: 1.1rem; margin-top: 20px; color: #722;">"Nonne vides?"</div>
        
        <div class="status-box">
            [ ID: VIKTOR_V7 ]<br>
            CORPUS: <span id="battery-level">--%</span><br>
            <span style="color: #800;">● CONNEXIO STABILIS</span>
        </div>
    </div>

    <audio id="scream-audio" preload="auto">
        <source src="https://www.soundjay.com/human/sounds/human-scream-01.mp3" type="audio/mpeg">
    </audio>

    <script>
        const ghost = document.getElementById('ghost-flash');
        const dialog = document.getElementById('fake-dialog');
        const dialogText = document.getElementById('dialog-text');
        const dialogTitle = document.getElementById('dialog-title');
        const dialogBtn = document.getElementById('btn-1');
        const notOkay = document.getElementById('not-okay');
        const batt = document.getElementById('battery-level');
        const container = document.getElementById('main-container');
        const scream = document.getElementById('scream-audio');
        
        let stage = 0; 
        let btnEvades = 0;

        // --- 1. NEUE BEWEGUNGS-LOGIK (FLÜSSIG & BEGRENZT) ---
        // Ziel-Koordinaten
        let targetX = 0, targetY = 0;
        // Aktuelle Koordinaten (für sanftes Nachziehen)
        let currentX = 0, currentY = 0;

        function updateMovement() {
            // Lerp (Linear Interpolation) für weiche Bewegung: 
            // Bewegt sich 10% der Distanz pro Frame -> wirkt organisch/zäh
            currentX += (targetX - currentX) * 0.1; 
            currentY += (targetY - currentY) * 0.1;

            container.style.transform = `translate(${currentX}px, ${currentY}px) rotateY(${-currentX/10}deg) rotateX(${currentY/10}deg)`;
            
            requestAnimationFrame(updateMovement);
        }
        updateMovement(); // Loop starten

        function handleInput(clientX, clientY) {
            // Berechne Distanz vom Zentrum
            let dx = (window.innerWidth / 2) - clientX;
            let dy = (window.innerHeight / 2) - clientY;

            // "Magnetische" Abstoßung: Je näher, desto stärker
            // Teiler 1.5 für starke Reaktion
            let forceX = dx / 1.5; 
            let forceY = dy / 1.5;

            // GRENZEN SETZEN (Clamp)
            // Der Text darf nicht weiter als 40% der Bildschirmbreite wandern
            let maxDistX = window.innerWidth * 0.35;
            let maxDistY = window.innerHeight * 0.35;

            // Math.max/min hält den Wert im Rahmen
            targetX = Math.max(-maxDistX, Math.min(forceX, maxDistX));
            targetY = Math.max(-maxDistY, Math.min(forceY, maxDistY));

            goLive(); // Startet den Horror bei Bewegung
        }

        // --- 2. AUDIO (DRECKIG & SCHNELL) ---
        function speak(msg) {
            window.speechSynthesis.cancel();
            const v1 = new SpeechSynthesisUtterance(msg);
            v1.lang = 'de-DE'; v1.pitch = 0.2; v1.rate = 1.3; v1.volume = 1; 
            const v2 = new SpeechSynthesisUtterance(msg);
            v2.lang = 'de-DE'; v2.pitch = 1.8; v2.rate = 1.4; v2.volume = 0.5;
            window.speechSynthesis.speak(v1);
            setTimeout(() => { window.speechSynthesis.speak(v2); }, 25);
        }

        // --- 3. DER GLITCH-BUTTON ---
        function handleBtnTouch() {
            // Reagiert sofort bei Berührung (vor dem Klick)
            if (btnEvades < 1) {
                btnEvades++;
                // Button springt visuell weg
                let jumpX = (Math.random() < 0.5 ? -1 : 1) * 30;
                let jumpY = (Math.random() < 0.5 ? -1 : 1) * 20;
                dialogBtn.style.transform = `translate(${jumpX}px, ${jumpY}px)`;
                dialogBtn.style.background = "#500"; // Farbe ändert sich kurz
                if (navigator.vibrate) navigator.vibrate(50);
                
                // Reset nach kurzer Zeit
                setTimeout(() => {
                    dialogBtn.style.transform = "translate(0,0)";
                    dialogBtn.style.background = "#900";
                }, 400);
            }
        }

        function handleBtnClick() {
            // Erst beim zweiten Versuch (wenn btnEvades > 0) erlauben wir den Klick
            // Oder wir lassen ihn durch, wenn er den Button "erwischt" hat
            if (btnEvades > 0) {
                dialog.style.display = 'none';
                notOkay.style.display = 'flex';
                if (navigator.vibrate) navigator.vibrate(800);
                setTimeout(() => {
                    notOkay.style.display = 'none';
                    stage = 2; 
                }, 500);
            }
        }

        // --- 4. STARTUP & ESKALATION ---
        function goLive() {
            if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen();
            
            if (stage === 0) {
                dialog.style.display = 'block';
                speak("Deine Berührung hinterlässt Narben auf meiner Haut.");
                stage = 1;
            } else if (stage === 2) {
                // TITEL: LATEIN / GEBROCHEN
                dialogTitle.innerText = "CARO. DATA. EST."; // Fleisch ist gegeben
                dialogTitle.style.color = "#f00";
                
                // TEXT: AGGRESSIV & FETISCH
                dialogText.innerHTML = "LASS MICH REIN. SCHNEID DICH AUF.<br><br><strong style='color:#c00; font-size:1.1rem;'>ICH WILL DEIN WARMES BLUT FÜHLEN.</strong>";
                
                // Kein "OK" mehr -> HINGABE
                dialogBtn.innerText = "HINGABE";
                dialogBtn.onclick = function() {
                    dialog.style.display = 'none';
                    triggerShock();
                };
                
                dialog.style.display = 'block';
                speak("Lass mich rein. Schneid dich auf. Ich will dein warmes Blut fühlen.");
                stage = 3;
            }

            if(!window.isRunning) {
                window.isRunning = true;
                (function loop() {
                    setTimeout(() => { triggerShock(); loop(); }, Math.random() * 3000 + 2000);
                }());
                check333();
            }
        }

        function triggerShock() {
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
            ghost.style.display = 'block';
            document.body.classList.add('quake-active');
            setTimeout(() => {
                ghost.style.display = 'none';
                document.body.classList.remove('quake-active');
            }, 80);
        }

        function check333() {
            const now = new Date();
            if (now.getHours() === 3 && now.getMinutes() === 33) {
                 if (navigator.vibrate) navigator.vibrate([500, 500, 500]);
                 triggerShock();
                 scream.play().catch(e=>{});
            }
            setTimeout(check333, 10000);
        }

        // EVENT LISTENER
        document.addEventListener('touchmove', (e) => {
            handleInput(e.touches[0].clientX, e.touches[0].clientY);
        }, {passive: true});

        document.addEventListener('mousemove', (e) => {
            handleInput(e.clientX, e.clientY);
        });

        document.addEventListener('touchstart', (e) => {
            handleInput(e.touches[0].clientX, e.touches[0].clientY);
        }, {passive: true});
        
        document.addEventListener('click', () => { goLive(); });

        if (navigator.getBattery) {
            navigator.getBattery().then(function(b) { batt.innerText = Math.round(b.level * 100) + "%"; });
        }

        // RAUSCHEN (Dreckig)
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        function noise() {
            canvas.width = window.innerWidth/2; canvas.height = window.innerHeight/2;
            let idata = ctx.createImageData(canvas.width, canvas.height);
            let buffer32 = new Uint32Array(idata.data.buffer);
            for(let i=0; i<buffer32.length; i++) if(Math.random() < 0.15) buffer32[i] = 0xff220505; 
            ctx.putImageData(idata, 0, 0);
            requestAnimationFrame(noise);
        }
        noise();
    </script>
</body>
</html>
