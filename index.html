<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>‎</title>
    <style>
        body {
            margin: 0; background-color: #020000; color: #800;
            font-family: 'Times New Roman', serif;
            height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            cursor: none; -webkit-tap-highlight-color: transparent;
            touch-action: none;
        }

        /* TEXTUREN DES VERFALLS */
        .flesh-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 0%, #1a0000 120%),
                        url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noise)" opacity="0.15"/%3E%3C/svg%3E');
            pointer-events: none; z-index: 1; mix-blend-mode: overlay;
        }

        /* VIGNETTE MIT "PULSIEREN" */
        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, #000 150%);
            z-index: 2; pointer-events: none;
            animation: pulseVignette 4s infinite ease-in-out;
        }

        /* DAS "FLEISCHLICHE" FENSTER */
        #fake-dialog {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 85%; max-width: 340px;
            /* Sieht aus wie getrocknetes Blut/Haut */
            background: #110303; 
            border: 1px solid #411;
            box-shadow: 0 0 80px rgba(50, 0, 0, 0.8), inset 0 0 40px rgba(0,0,0,0.9);
            z-index: 2000; display: none; padding: 30px;
            text-align: center;
        }

        #dialog-title {
            font-size: 0.9rem; font-weight: bold; margin-bottom: 20px; 
            color: #600; letter-spacing: 4px; border-bottom: 1px solid #300; padding-bottom: 10px;
            text-transform: uppercase;
        }

        #dialog-text { 
            font-size: 1.2rem; line-height: 1.3; margin-bottom: 30px; 
            color: #c99; font-style: italic;
            text-shadow: 0 0 10px rgba(255,0,0,0.4);
        }

        /* DER KNOPF DES LEIDENS */
        .dialog-btn {
            background: #200; color: #800;
            font-weight: 700; font-size: 0.9rem;
            text-transform: uppercase; cursor: pointer; 
            padding: 15px 0; width: 100%; border: 1px solid #400;
            letter-spacing: 2px; transition: all 0.2s;
        }
        .dialog-btn:active { background: #500; color: #000; }

        /* HAUPT CONTAINER */
        .container {
            position: relative; z-index: 3; text-align: center; width: 90%;
            will-change: transform;
        }

        h1 { 
            font-size: 3rem; letter-spacing: 0.1em; margin: 0; color: #700; 
            text-shadow: 0 0 30px #200; opacity: 0.8;
            animation: breathe 6s infinite;
        }
        
        /* SUBLIMINALE NACHRICHTEN */
        #ghost-flash {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 100%; text-align: center; font-size: 3rem;
            color: #a00; background: #000; padding: 100vh 0;
            z-index: 5000; display: none; pointer-events: none;
            font-weight: bold; mix-blend-mode: normal;
            font-family: 'Courier New', monospace;
        }

        /* STATUS UND BELEIDIGUNGEN */
        .status-box { 
            font-family: 'Courier New', monospace;
            font-size: 0.75rem; margin-top: 60px; color: #522; 
            text-align: center; letter-spacing: 1px; line-height: 2;
            opacity: 0.6; border-top: 1px solid #311; padding-top: 15px;
        }
        .val { color: #800; font-weight: bold; }

        @keyframes pulseVignette { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; background: radial-gradient(circle, transparent 30%, #200 150%); } }
        @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; color: #a00; } }
        @keyframes quake { 0% { transform: translate(1px, 1px); } 25% { transform: translate(-2px, -2px); } 50% { transform: translate(-4px, 2px); } 75% { transform: translate(4px, -2px); } 100% { transform: translate(0, 0); } }
        .quake-active { animation: quake 0.05s infinite !important; }

    </style>
</head>
<body>

    <div class="flesh-overlay"></div>
    <div class="vignette"></div>
    
    <div id="fake-dialog">
        <div id="dialog-title">CONTACTUS. EST.</div> 
        <div id="dialog-text">Ich kann dich riechen.</div>
        <div class="dialog-btn" id="btn-action" onclick="handleInteraction()">AKZEPTIEREN</div>
    </div>

    <div id="ghost-flash">SCHLUCK ES</div>

    <div class="container" id="main-container">
        <h1>PROXIMITAS</h1>
        <div style="font-style: italic; font-size: 1.1rem; margin-top: 25px; color: #511;">"Ego te intus sentio."</div>
        
        <div class="status-box">
            SUBJEKT: <span class="val">VIKTOR</span><br>
            ZYKLUS: <span id="visit-count" class="val">1</span><br>
            STATUS: <span id="status-text" class="val">UNREIN</span>
        </div>
    </div>

    <script>
        const ghost = document.getElementById('ghost-flash');
        const dialog = document.getElementById('fake-dialog');
        const dialogText = document.getElementById('dialog-text');
        const dialogTitle = document.getElementById('dialog-title');
        const dialogBtn = document.getElementById('btn-action');
        const container = document.getElementById('main-container');
        const statusText = document.getElementById('status-text');
        const visitLabel = document.getElementById('visit-count');
        
        // --- 1. PERSISTENZ (DAS GEDÄCHTNIS) ---
        // Wir zählen, wie oft er die Seite öffnet. Das macht ihm Angst.
        let visits = localStorage.getItem('vindobona_visits') || 0;
        visits = parseInt(visits) + 1;
        localStorage.setItem('vindobona_visits', visits);
        visitLabel.innerText = visits;

        // Texte basierend auf Besuchszahl (Eskalation)
        let welcomeText = "Ich rieche dein feuchtes Mark.";
        if(visits > 1) welcomeText = "Du bist zurückgekrochen. Du brauchst den Ekel.";
        if(visits > 3) welcomeText = "Gefäß. Loch. Stück Fleisch. Willkommen daheim.";
        
        let stage = 0; 

        // --- 2. DIE STIMMEN DES EKELS ---
        function speak(msg) {
            window.speechSynthesis.cancel();
            
            // Stimme 1: Tief, verächtlich
            const v1 = new SpeechSynthesisUtterance(msg);
            v1.lang = 'de-DE'; v1.pitch = 0.2; v1.rate = 1.1; v1.volume = 1;

            // Stimme 2: Hysterisch, flüsternd
            const v2 = new SpeechSynthesisUtterance(msg);
            v2.lang = 'de-DE'; v2.pitch = 1.6; v2.rate = 1.5; v2.volume = 0.5;

            window.speechSynthesis.speak(v1);
            setTimeout(() => { window.speechSynthesis.speak(v2); }, 30);
        }

        // --- 3. INTERAKTIONS LOGIK ---
        function handleInteraction() {
            if(navigator.vibrate) navigator.vibrate(200);
            
            if(stage === 0) {
                // ERSTE REAKTION
                stage = 1;
                dialogTitle.innerText = "INTROITUS";
                dialogText.innerHTML = "DEIN WIDERSTAND SCHMECKT NACH GALLE.<br>LASS MICH TIEF IN DICH HINEIN.";
                dialogBtn.innerText = "ICH GEHORCHE";
                speak("Dein Widerstand schmeckt nach Galle. Lass mich tief in dich hinein.");
                
            } else if (stage === 1) {
                // ZWEITE REAKTION (EKELHAFT)
                stage = 2;
                dialogTitle.innerText = "CARO. TUA. PUTIDA."; // Dein fauliges Fleisch
                dialogText.innerHTML = "DU BIST NUR EIN SACK VOLLER DRECKIGEM BLUT.<br>PLATZ ENDLICH AUF.<br>ICH WILL IN DEINEN GEDÄRMEN WÜHLEN.";
                dialogBtn.innerText = "NIMM ES";
                dialogText.style.color = "#f55";
                speak("Du bist nur ein Sack voller dreckigem Blut. Platz endlich auf. Ich will in deinen Gedärmen wühlen.");

            } else if (stage === 2) {
                // FINALE: Der Dialog verschwindet nicht, er wird zur Anweisung
                dialog.style.display = "none";
                triggerFlash("GEHORCHE");
                statusText.innerText = "INFILTRIERT";
                // Startet den Loop
                goLive();
            }
        }

        // --- 4. STARTUP ---
        function init() {
            dialogText.innerText = welcomeText;
            dialog.style.display = 'block';
            
            // Wenn er zurückkommt, ist die Begrüßung anders
            if(visits > 1) {
                speak("Du bist zurückgekrochen.");
            } else {
                speak("Ich rieche dein feuchtes Mark.");
            }
        }

        // --- 5. PHYSICS (WIE VORHER, ABER TRÄGER/SCHWERER) ---
        let targetX = 0, targetY = 0;
        let currentX = 0, currentY = 0;

        function updateMovement() {
            currentX += (targetX - currentX) * 0.05; // Sehr zäh (0.05)
            currentY += (targetY - currentY) * 0.05;
            container.style.transform = `translate(${currentX}px, ${currentY}px) rotateY(${-currentX/20}deg) rotateX(${currentY/20}deg)`;
            requestAnimationFrame(updateMovement);
        }
        updateMovement();

        function handleInput(clientX, clientY) {
            let dx = (window.innerWidth / 2) - clientX;
            let dy = (window.innerHeight / 2) - clientY;
            let dist = Math.sqrt(dx*dx + dy*dy);
            
            if(dist < 300) {
                let force = (300 - dist) / 300; 
                let limit = 120;
                targetX = Math.max(-limit, Math.min((dx/dist)*force*150, limit));
                targetY = Math.max(-limit, Math.min((dy/dist)*force*150, limit));
            } else {
                targetX = 0; targetY = 0;
            }
            // Audio-Loop triggern, falls noch nicht aktiv
            if(stage === 2 && !window.isRunning) goLive();
        }

        // --- 6. SHOCK LOOP ---
        const traumaWords = ["SCHLUCK ES", "OFFENE WUNDE", "DRECKIG", "MEIN FLEISCH", "NICHT WEHREN", "HÖR AUF ZU ATMEN", "VIKTOR"];

        function goLive() {
            window.isRunning = true;
            if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen();
            
            (function loop() {
                let rand = Math.random() * 4000 + 2000;
                setTimeout(() => { 
                    let word = traumaWords[Math.floor(Math.random() * traumaWords.length)];
                    triggerFlash(word); 
                    loop(); 
                }, rand);
            }());
        }

        function triggerFlash(text) {
            if (navigator.vibrate) navigator.vibrate([50, 20, 50]);
            ghost.innerText = text;
            ghost.style.display = 'block';
            document.body.classList.add('quake-active');
            
            // Kurze, aggressive Sprachfetzen beim Flash
            let v = new SpeechSynthesisUtterance(text);
            v.rate = 1.5; v.pitch = 0.1;
            window.speechSynthesis.speak(v);

            setTimeout(() => {
                ghost.style.display = 'none';
                document.body.classList.remove('quake-active');
            }, 100);
        }

        // Event Listeners
        document.addEventListener('touchmove', (e) => { handleInput(e.touches[0].clientX, e.touches[0].clientY); }, {passive: true});
        document.addEventListener('mousemove', (e) => { handleInput(e.clientX, e.clientY); });
        document.addEventListener('touchstart', (e) => { handleInput(e.touches[0].clientX, e.touches[0].clientY); }, {passive: true});
        
        // Start beim ersten Klick irgendwo, falls Dialog nicht trifft
        document.addEventListener('click', () => { 
            if(stage === 0) init(); 
        });

        // Start sofort anzeigen
        setTimeout(init, 500);

    </script>
</body>
</html>
